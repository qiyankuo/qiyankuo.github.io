<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Linux基础 | 知与行</title><meta name="author" content="QiYan"><meta name="copyright" content="QiYan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="本文主要讲解Linux操作系统的基本命令，也可以作为一个Linux基础命令的速查手册   Linux的基本原则 一些皆文件 配置文件保存为纯文本格式 由目的单一的小程序组成，组合小程序完成复杂任务 尽量避免捕获用户接口（尽量减少与用户交互，比如如果命令运行成功则不会显示任何信息，没有消息是最好的消息）  Linux交互Shell分类Shell是用户和操作系统进行交互的软件。在Linux中它分为如">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux基础">
<meta property="og:url" content="http://example.com/2022/11/25/Linux-basic/index.html">
<meta property="og:site_name" content="知与行">
<meta property="og:description" content="本文主要讲解Linux操作系统的基本命令，也可以作为一个Linux基础命令的速查手册   Linux的基本原则 一些皆文件 配置文件保存为纯文本格式 由目的单一的小程序组成，组合小程序完成复杂任务 尽量避免捕获用户接口（尽量减少与用户交互，比如如果命令运行成功则不会显示任何信息，没有消息是最好的消息）  Linux交互Shell分类Shell是用户和操作系统进行交互的软件。在Linux中它分为如">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-11-25T09:16:13.689Z">
<meta property="article:modified_time" content="2022-11-25T09:16:13.688Z">
<meta property="article:author" content="QiYan">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2022/11/25/Linux-basic/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux基础',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-11-25 17:16:13'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/font.css"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="知与行" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">13</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">17</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">知与行</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Linux基础</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-11-25T09:16:13.689Z" title="发表于 2022-11-25 17:16:13">2022-11-25</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-25T09:16:13.688Z" title="更新于 2022-11-25 17:16:13">2022-11-25</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">12.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>49分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Linux基础"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><div class="note blue icon-padding flat">
<p>本文主要讲解Linux操作系统的基本命令，也可以作为一个Linux基础命令的速查手册</p>
</div>

<h2 id="Linux的基本原则"><a href="#Linux的基本原则" class="headerlink" title="Linux的基本原则"></a>Linux的基本原则</h2><ul>
<li>一些皆文件</li>
<li>配置文件保存为纯文本格式</li>
<li>由目的单一的小程序组成，组合小程序完成复杂任务</li>
<li>尽量避免捕获用户接口（尽量减少与用户交互，比如如果命令运行成功则不会显示任何信息，没有消息是最好的消息）</li>
</ul>
<h2 id="Linux交互"><a href="#Linux交互" class="headerlink" title="Linux交互"></a>Linux交互</h2><h3 id="Shell分类"><a href="#Shell分类" class="headerlink" title="Shell分类"></a>Shell分类</h3><p>Shell是用户和操作系统进行交互的软件。在Linux中它分为如下类型：  </p>
<blockquote>
<ul>
<li>GUI（图形界面交互）  <ul>
<li>Gnode  </li>
<li>KDE  </li>
<li>XFace</li>
</ul>
</li>
<li>CLI（命令行交互）  <ul>
<li>sh</li>
<li>bash</li>
<li>csh</li>
<li>zsh</li>
<li>ksh</li>
<li>tcsh</li>
</ul>
</li>
</ul>
</blockquote>
<p> 使用bash登陆Linux后会显示命令提示符（prompt）：</p>
<pre><code>[root@localhost ~]#    
</code></pre>
<p>其中root是用户名，localhost是主机名，~代表家目录（&#x2F;代表根目录），#代表管理员（$代表普通用户）  </p>
<blockquote>
<p>虚拟终端(terminal)：Ctrl+Alt+F1-F6。Linux中有六个虚拟终端，每个虚拟终端都是一个Shell程序。一个用户可以在多个虚拟终端中同时登陆互不影响。CentOS 7之前可以使用init 3命令将图形shell转换为命令行Shell，使用init 5则相反。CentOS 7之后使用systemctl isolate multi-user.target或者systemctl isolate graphical.target切换</p>
</blockquote>
<h3 id="bash特性"><a href="#bash特性" class="headerlink" title="bash特性"></a>bash特性</h3><p>1、命令历史、命令补全 </p>
<pre><code>  history：查看命令历史
 -c：清空命令历史
 -d OFFSET [n]: 删除指定位置的命令
 -w：保存命令历史至历史文件中 

 HISTSIZE环境变量: 命令历史缓冲区大小
 ~/.bash_history：命令历史文件路径

 命令历史的使用技巧：
  !n      ：执行命令历史中的第n条命令；
 !-n     :执行命令历史中的倒数第n条命令； 
 !!      : 执行上一条命令；
 !string ：执行命令历史中最近一个以指定字符串开头的命令
 !$      :引用前一个命令的最后一个参数; 
 Esc, .  :引用前一个命令的最后一个参数，先按Esc，再按.；
 Alt+.	 :引用前一个命令的最后一个参数，只在linux终端中可以；

 命令、路径补全：
 命令补全：搜索PATH环境变量所指定的每个路径下以我们给出的字符串开头的可执行文件，如果多于一个，两次tab，可以给出列表；否则将直接补全；
 路径补全：搜索我们给出的起始路径下的每个文件名，并试图补全；
</code></pre>
<p>2、管道、重定向<br>3、命令别名  </p>
<pre><code>alias CMDALIAS=&#39;COMMAND [options] [arguments]&#39; 定义别名
在shell中定义的别名仅在当前shell生命周期中有效；别名的有效范围仅为当前shell进程；

ualias CMDALIAS 解除别名
\CMD ： 执行原命令
</code></pre>
<p>4、命令行编辑  </p>
<pre><code>光标跳转：  

Ctrl+a：跳到命令行首
Ctrl+e：跳到命令行尾
Ctrl+u: 删除光标至命令行首的内容
Ctrl+k: 删除光标至命令行尾的内容
Ctrl+l: 清屏
</code></pre>
<p>5、命令行展开  </p>
<pre><code>命令替换: $(COMMAND), 反引号：`COMMAND`
把命令中某个子命令替换为其执行结果的过程,如：：file-2013-02-28-14-53-31.txt

bash支持的引号：
``: 命令替换
&quot;&quot;: 弱引用，可以实现变量替换
&#39;&#39;: 强引用，不完成变量替换

命令行展开：
&#123;a,d&#125;_&#123;b,c&#125;
mkdir -pv /mnt/test/&#123;x/m,y&#125;
cp /etc/&#123;passwd,inittab,rc.d/rc.sysinit&#125; /tmp/
</code></pre>
<p>6、文件名通配  </p>
<pre><code> globbing
 *: 任意长度的任意字符
 ?：任意单个字符
 []：匹配指定范围内的任意单个字符
     [abc], [a-m], [a-z], [A-Z], [0-9], [a-zA-Z], [0-9a-zA-Z]
     [:space:]：空白字符
     [:punct:]：标点符号
     [:lower:]：小写字母
     [:upper:]: 大写字母
     [:alpha:]: 大小写字母
     [:digit:]: 数字
     [:alnum:]: 数字和大小写字母

  # man 7 glob
  [^]: 匹配指定范围之外的任意单个字符
  [[:alpha:]]*[[:space:]]*[^[:alpha:]]
  注：文件通配符并不能匹配所有情况，比如：显示所有以数字结尾且文件名中不包含空白的文件；ls *[^[:space:]]*[0-9]   ?????????
</code></pre>
<p>7、变量<br>8、编程  </p>
<blockquote>
<p>注：&#x2F;etc&#x2F;shells：指定了当前系统可用的安全shell  </p>
</blockquote>
<div class="note green icon-padding flat">
<p>练习：</p>
<p>1、创建a123, cd6, c78m, c1 my, m.z, k 67, 8yu, 789等文件；注意，以上文件是以逗号隔开的，其它符号都是文件名的组成部分；  </p>

<p>2、显示所有以a或m开头的文件；  </p>

<pre><code>ls [am]*  
</code></pre>
<p>3、显示所有文件名中包含了数字的文件； </p> 

<pre><code>ls *[0-9]*   
ls *[[:digit:]]*  
</code></pre>
<p>4、显示所有以数字结尾且文件名中不包含空白的文件； </p> 

<pre><code>ls *[^[:space:]]*[0-9]   ?????????  
</code></pre>
<p>5、显示文件名中包含了非字母或数字的特殊符号的文件； </p> 

<pre><code>ls *[^[:alnum:]]*
</code></pre>
</div>

<h3 id="登陆式shell和非登陆式shell"><a href="#登陆式shell和非登陆式shell" class="headerlink" title="登陆式shell和非登陆式shell"></a>登陆式shell和非登陆式shell</h3><p>站在用户登录的角度来说，SHELL的类型：</p>
<ul>
<li><p>登录式shell:</p>
<ul>
<li>正常通过某终端登录</li>
<li>su - USERNAME </li>
<li>su -l USERNAME</li>
</ul>
</li>
<li><p>非登录式shell:</p>
<ul>
<li>su USERNAME</li>
<li>图形终端下打开命令窗口</li>
<li>自动执行的shell脚本</li>
</ul>
</li>
</ul>
<p>bash的配置文件：</p>
<ul>
<li><p>全局配置</p>
<pre><code>  /etc/profile  
  /etc/profile.d/*.sh  
  /etc/bashrc 
</code></pre>
</li>
<li><p>个人配置</p>
<pre><code>  ~/.bash_profile 
  ~/.bashrc
</code></pre>
</li>
</ul>
<p>profile类的文件：  </p>
<ul>
<li>设定环境变量</li>
<li>运行命令或脚本</li>
</ul>
<p>bashrc类的文件：  </p>
<ul>
<li>设定本地变量</li>
<li>定义命令别名</li>
</ul>
<p>登录式shell如何读取配置文件？  </p>
<pre><code>/etc/profile --&gt; /etc/profile.d/*.sh --&gt; ~/.bash_profile --&gt; ~/.bashrc --&gt; /etc/bashrc
</code></pre>
<p>非登录式shell如何配置文件?</p>
<pre><code>~/.bashrc --&gt; /etc/basrc --&gt; /etc/profile.d/*.sh
</code></pre>
<h2 id="Linux文件目录"><a href="#Linux文件目录" class="headerlink" title="Linux文件目录"></a>Linux文件目录</h2><p>Linux的一级目录如下：  </p>
<ul>
<li>&#x2F;boot: 系统启动相关的文件，如内核、initrd，以及grub(bootloader)  </li>
<li>&#x2F;dev: 设备文件  </li>
<li>设备文件：  <ul>
<li>块设备：随机访问，数据块  </li>
<li>字符设备：线性访问，按字符为单位  </li>
<li>设备号：主设备号（major）和次设备号（minor）</li>
</ul>
</li>
<li>&#x2F;etc：配置文件  </li>
<li>&#x2F;home：用户的家目录，每一个用户的家目录通常默认为&#x2F;home&#x2F;USERNAME  </li>
<li>&#x2F;root：管理员的家目录；  </li>
<li>&#x2F;lib：库文件  <ul>
<li>静态库,  .a   </li>
<li>动态库， .dll, .so (shared object)</li>
</ul>
</li>
<li>&#x2F;lib&#x2F;modules：内核模块文件  </li>
<li>&#x2F;media：挂载点目录，移动设备  </li>
<li>&#x2F;mnt：挂载点目录，额外的临时文件系统  </li>
<li>&#x2F;opt：可选目录，第三方程序的安装目录  </li>
<li>&#x2F;proc：伪文件系统，内核映射文件  </li>
<li>&#x2F;sys：伪文件系统，跟硬件设备相关的属性映射文件  </li>
<li>&#x2F;tmp：临时文件, &#x2F;var&#x2F;tmp  </li>
<li>&#x2F;var：可变化的文件  </li>
<li>&#x2F;bin: 可执行文件, 用户命令  </li>
<li>&#x2F;sbin：管理命令</li>
</ul>
<p>&#x2F;usr：shared, read-only  </p>
<ul>
<li>&#x2F;usr&#x2F;bin  </li>
<li>&#x2F;usr&#x2F;sbin  </li>
<li>&#x2F;usr&#x2F;lib</li>
</ul>
<p>&#x2F;usr&#x2F;local：  </p>
<ul>
<li>&#x2F;usr&#x2F;local&#x2F;bin  </li>
<li>&#x2F;usr&#x2F;local&#x2F;sbin  </li>
<li>&#x2F;usr&#x2F;local&#x2F;lib</li>
</ul>
<p>Linux中文件命名规则：  </p>
<ol>
<li>长度不能超过255个字符；  </li>
<li>不能使用&#x2F;当文件名  </li>
<li>严格区分大小写</li>
</ol>
<h2 id="Linux基础命令"><a href="#Linux基础命令" class="headerlink" title="Linux基础命令"></a>Linux基础命令</h2><h3 id="命令基础"><a href="#命令基础" class="headerlink" title="命令基础"></a>命令基础</h3><p>1、命令格式：</p>
<blockquote>
<p>命令 选项 参数</p>
<p>选项  </p>
<ul>
<li>短选项：- (多个选项可以组合 -a -b &#x3D; -ab)</li>
<li>长选项：- -</li>
</ul>
<p>参数：命令的作用对象</p>
</blockquote>
<p>2、命令类型：  </p>
<ul>
<li>内置命令(shell内置)，内部，内建  </li>
<li>外部命令：在文件系统的某个路径下有一个与命令名称相应的可执行文件</li>
</ul>
<p>3、type: 显示指令属于哪种类型</p>
<pre><code>[root@localhost ~]# type ls
ls is aliased to `ls --color=auto&#39; (命令别名)
[root@localhost ~]# type cd
cd is a shell builtin  （内部命令）
[root@localhost ~]# type vi
vi is /usr/bin/vi （外部命令，对应文件）
</code></pre>
<p>4、环境变量：命名的内存空间  </p>
<pre><code>变量赋值:NAME=Jerry  
PATH: 使用冒号分隔的路径，命令的默认搜索路径  
</code></pre>
<h3 id="查看命令帮助"><a href="#查看命令帮助" class="headerlink" title="查看命令帮助"></a>查看命令帮助</h3><blockquote>
<p>获得命令的使用帮助：<br>内部命令：help COMMAND<br>外部命令：COMMAND –help<br>在线手册：info COMMAND  (不常用)<br>文    档：&#x2F;usr&#x2F;share&#x2F;doc<br>命令手册：man COMMAND  </p>
<p>注：帮助中符号的意思<br>&lt;&gt;：必选     [] ：可选    … : 可以出现多次     | ：多选一    {} ：分组  </p>
</blockquote>
<p>man [指定章节数字] COMMAND  </p>
<pre><code>[root@localhost ~]# man DATE

DATE(1)（1代表章节）                                                            User Commands                                                                   DATE(1)

NAME（命令名称及功能简要说明）
       date - print or set the system date and time

SYNOPSIS（用法说明，包括可用的选项）
       date [OPTION]... [+FORMAT]
       date [-u|--utc|--universal] [MMDDhhmm[[CC]YY][.ss]]

DESCRIPTION（命令功能的详尽说明，可能包括每一个选项的意义）
     OPTIONS：说明每一个选项的意义  
       Display the current time in the given FORMAT, or set the system date.

       Mandatory arguments to long options are mandatory for short options too.

       -d, --date=STRING
              display time described by STRING, not &#39;now&#39;
FILES：此命令相关的配置文件  
      ......
BUGS： 
      ......
EXAMPLES：使用示例  
      ......
SEE ALSO：另外参照
      ...... 

注：man文档查看方法
    翻屏：
        向后翻一屏：SPACE
        向前翻一屏：b
        向后翻一行：ENTER
        向前翻一行：k

    查找：
        /KEYWORD: 向后
            n: 下一个
            N：前一个 
    
        ?KEYWORD：向前
        n: 下一个
        N：前一个 
    
    q: 退出
</code></pre>
<p>man帮助中分章节，每个章节中存放不同类型的命令。比如1和5章节中都包含passwd。man命令如果不指定章节数，则默认显示最小章节的命令。查看5章节的passwd帮助使用man 5 passwd：  </p>
<ul>
<li>1：用户命令(&#x2F;bin, &#x2F;usr&#x2F;bin, &#x2F;usr&#x2F;local&#x2F;bin)  </li>
<li>2：系统调用  </li>
<li>3：库用户  </li>
<li>4：特殊文件(设备文件)  </li>
<li>5：文件格式(配置文件的语法)  </li>
<li>6：游戏  </li>
<li>7：杂项(Miscellaneous)  </li>
<li>8: 管理命令(&#x2F;sbin, &#x2F;usr&#x2F;sbin, &#x2F;usr&#x2F;local&#x2F;sbin)</li>
</ul>
<p>whatis COMMAND：查看命令属于那些章节  </p>
<pre><code>[root@localhost ~]# whatis date  
date (1)             - print or set the system date and time  
date (1p)            - write the date and time
</code></pre>
<div class="note blue icon-padding flat">
<p>练习：</p>  

<p>1. 使用date单独获取系统当前的年份、月份、日、小时、分钟、秒  </p>  
<p>2. echo和printf是内部命令还是外部命令？  </p>  
<p>3. echo和printf作用？  </p>  
<p>4. echo和printf如何显示“The year is 2013. Today is 26.”为两行？  </p>  
<p>5. file命令及其用法？</p>  
</div>

<h3 id="时间管理"><a href="#时间管理" class="headerlink" title="时间管理"></a>时间管理</h3><p>Linux时间有两种。一种是硬件时钟，另一种是系统时钟。</p>
<blockquote>
<ul>
<li>硬件时钟：CPU内置振荡器确定时间，同时CPU内置纽扣电源为振荡器提供电量。</li>
<li>系统时钟：Linux系统启动后，读取硬件时间并以软件方式模拟一个振荡器。date查看的便是系统时钟。</li>
</ul>
</blockquote>
<p>date：时间管理  </p>
<blockquote>
<p>-d 后跟字符串，显示字符串指定的时间 </p>
</blockquote>
<pre><code>[root@localhost ~]# date -d &quot;2 days ago&quot;  
Fri Nov 19 02:05:54 EST 2021  
[root@localhost ~]# date -d &quot;2021/11/21&quot;  
Sun Nov 21 00:00:00 EST 2021    

\\\\ 指定时间输出格式：  
[root@localhost ~]# date -d &quot;10 days ago&quot; +&quot;The day is %Y-%m-%d %H:%M:%S%nThe day is %A&quot;  
The day is 2021-11-11 02:27:09  
The day is Thursday  

\\\\ 修改时间  
[root@localhost ~]# date -s &quot;2019-01-01 08:08:08&quot;
Tue Jan  1 08:08:08 EST 2019
</code></pre>
<p>clock、hwclock：硬件时钟</p>
<pre><code>-s 将系统时间更新为硬件时钟
-w 将硬件时钟更新为系统时间
</code></pre>
<p>cal：查看日历</p>
<h3 id="目录管理"><a href="#目录管理" class="headerlink" title="目录管理"></a>目录管理</h3><p>ls（list）：列出指定路径下的文件  </p>
<pre><code> -l：长格式  
    文件类型：  
        -：普通文件 (f)  
        d: 目录文件  
        b: 块设备文件 (block)  
        c: 字符设备文件 (character)  
        l: 符号链接文件(symbolic link file)  
        p: 命令管道文件(pipe)  
        s: 套接字文件(socket)  
    文件权限：9位，每3位一组，每一组：rwx(读，写，执行), r--  
    文件硬链接的次数  
    文件的属主(owner)  
    文件的属组(group)  
    文件大小(size)，单位是字节  
    时间戳(timestamp)：最近一次被修改的时间  
        访问:access，文件最近访问时间  
        修改:modify，文件内容发生了改变  
        改变:change，metadata，元数据（如文件名、文件权限等属性改变）  
-h：做单位转换，提高信息可读性  
-a: 显示以.开头的隐藏文件  
    . 表示当前目录  
    .. 表示父目录  
-A  显示以.开头的隐藏文件（除.和..目录）  
-d: 显示目录自身属性，而不是目录下的内容。只显示当前文件或目录的属性  
-i: index node, inode  
-r: 逆序显示  
-R: 递归(recursive)显示  
</code></pre>
<p>pwd（Printing Working directory）：输出当前工作路径  </p>
<p>cd: change directory  </p>
<pre><code>cd ~: 进入指定用户的家目录  
cd -:在当前目录和前一次所在的目录之间来回切换  
</code></pre>
<p>mkdir：创建空目录  </p>
<pre><code>-p: 目录已存在不报错，父路径不存在自动创建  
-v: verbose 打印出创建的每个目录

mkdir -pv /mnt/test2/&#123;a,d&#125;_&#123;b,c&#125;：命令行展开，创建a_b, a_c, d_b, d_c目录
</code></pre>
<p>tree：查看目录树</p>
<p>rmdir (remove directory)：删除空目录  </p>
<pre><code>-p: 如果父目录为空也会自动删除
</code></pre>
<p>du ： 用于显示目录或文件的大小  </p>
<pre><code>-s 仅显示总计  
-h 做单位换算，提高信息可读性
</code></pre>
<h3 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h3><p>touch  修改文件的访问时间或修改时间为当前时间</p>
<pre><code> -a  仅仅改变访问时间  
 -m  仅仅改变修改时间  
 -t  指定[[CC]YY]MMDDhhmm[.ss]，代替当前时间  
 -c  不创建任何文件  
</code></pre>
<blockquote>
<p>注：修改访问或修改任何一个时间都会自动修改改变时间为当前时间</p>
</blockquote>
<p>stat  展示文件或文件系统属性</p>
<pre><code>[root@localhost Music]# stat 11.txt 
  File: &#39;11.txt&#39;
  Size: 14              Blocks: 8          IO Block: 4096   regular file
Device: fd00h/64768d    Inode: 3169019     Links: 1
Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)
Context: unconfined_u:object_r:admin_home_t:s0
Access: 2019-01-01 01:01:00.000000000 -0500
Modify: 2019-01-01 01:01:00.000000000 -0500
Change: 2021-11-21 06:07:26.151522828 -0500
 Birth: -
 
</code></pre>
<p>nano：文本编辑器，不常用。</p>
<p>rm  删除文件或目录  </p>
<pre><code>-i 每一次删除之前都提示    
-f 忽略不存在的文件，强制删除不提示  
-r 递归删除
</code></pre>
<p>cp SRC DEST 复制文件  </p>
<pre><code>-r：递归拷贝目录下内容  
-d：复制时保留链接，如果是链接文件复制后依然是链接文件。  
-i：存在目标文件则提示是否覆盖  
-f：覆盖已经存在的目标文件而不给出提示。
-p（小写）：保留这个文件原来的权限、属主、属组、时间戳。注：目前我用普通用户复制属主和属组还是变化。
-P（大写）：如果是链接复制为链接
-a：归档复制，常用于备份，相当于-dR --preserve=all

多个文件到一个目录
cp /etc/&#123;passwd,inittab,rc.d/rc.sysinit&#125; /tmp/
</code></pre>
<p>mv SRC DEST  移动文件<br>mv -t DEST SRC  -t 是将源和目标位置反向</p>
<p>install  复制文件并可以设置属性  </p>
<pre><code> install -d DIRECOTRY ... ：创建目录    
 install -m ：可以指定权限  
 install SRC DEST 复制文件，复制之后会有执行权限  
 install -t DIRECTORY SRC...  
</code></pre>
<h3 id="查看文本"><a href="#查看文本" class="headerlink" title="查看文本"></a>查看文本</h3><p>cat：连接文件并显示  </p>
<pre><code>-n 显示行号   
-E 显示每一行的结束符$ 

[root@localhost Music]# cat file1 file2  
this file is one.  
this file is two.   
[root@localhost Music]# cat -n file1 file2  
     1  this file is one.  
     2  this file is two.  
[root@localhost Music]# cat -E file1 file2  
this file is one.$  
this file is two.$  
[root@localhost Music]# cat -nE file1 file2  
     1  this file is one.$  
     2  this file is two.$
</code></pre>
<p>tac: 将文件内容倒着显示</p>
<pre><code>[root@localhost Music]# tac file1
this file is one, the line is 6.
this file is one, the line is 5.
this file is one, the line is 4.
this file is one, the line is 3.
this file is one, the line is 2.
this file is one, the line is 1.
</code></pre>
<p>more：以一页一页的方式查看文本，到文件末尾会自动退出。详细使用见man命令</p>
<p>less：less 与 more 类似，less 可以随意浏览文件，支持翻页和搜索，支持向上翻页和向下翻页。到文件末尾不会自动退出。</p>
<p>head:查看前n行   </p>
<pre><code>-n: 指定行数，默认为10  
</code></pre>
<p>tail:查看后n行  </p>
<pre><code>-n: 指定行数，默认为10  
-f: 会把文件里的最尾部的内容显示在屏幕上，并且不断刷新，只要 filename 更新就可以看到最新的文件内容。
</code></pre>
<h3 id="文本处理"><a href="#文本处理" class="headerlink" title="文本处理"></a>文本处理</h3><p>file： 辨识文件类型  </p>
<p>测试文件内容：</p>
<pre><code>Tom:25:male:2013/05/06  
Jack:24:famale:2013/05/06
Json:23:male:2013/05/06
Mark:26:famale:2013/05/06
</code></pre>
<p>cut:  分割文件中的每一行，并只显示选择字段</p>
<pre><code>-d: 指定字段分隔符，默认是空格
-f: 指定要显示的字段
    -f 1,3
    -f 1-3

[root@localhost Music]# cut -d : -f 1,3 file3
Tom:male
Jack:famale
Json:male
Mark:famale
</code></pre>
<p>sort：文本排序</p>
<pre><code>-n：数值排序
-r: 降序
-t: 字段分隔符
-k: 以哪个字段为关键字进行排序
-u: 排序后相同的行只显示一次
-f: 排序时忽略字符大小写

[root@localhost Music]# sort -n -t : -k 2 file3
ZhangSan:6:famale:2013/05/06
Json:23:male:2013/05/06
WangWu:23:male:2013/05/06
Jack:24:famale:2013/05/06
Tom:25:male:2013/05/06
Mark:26:famale:2013/05/06
ZhaoLiu:26:male:2013/05/06
LiSi:111:male:2013/05/06
[root@localhost Music]# sort -n -t : -k 2 -u file3
ZhangSan:6:famale:2013/05/06
Json:23:male:2013/05/06
Jack:24:famale:2013/05/06
Tom:25:male:2013/05/06
Mark:26:famale:2013/05/06
LiSi:111:male:2013/05/06
</code></pre>
<p>uniq:去重，去重时两行相邻并且内容一致才会认定是重复</p>
<pre><code>-c: 显示文件中行重复的次数
-d: 只显示重复的行
</code></pre>
<p>wc (word count)：文本统计，打印文件的行数、单词数、字节数</p>
<pre><code> -l：打印行数
 -w：打印单词数
 -c：打印字节数
 -L：打印最长行的长度
</code></pre>
<p>tr —— 转换或删除字符  </p>
<pre><code>tr [OPTION]... SET1 [SET2]
      -d: 删除出现在字符集中的所有字符

tr ab AB ：将文档中的a全部转换为A，将b全部转换为B，并不是ab转AB
</code></pre>
<h3 id="文本查找"><a href="#文本查找" class="headerlink" title="文本查找"></a>文本查找</h3><p>locate: 非实时，模糊匹配，查找是根据全系统文件数据库进行的，速度快；<br>updatedb: 手动生成文件数据库（比较慢）</p>
<p>find：实时、精确、支持众多查找标准、遍历指定目录中的所有文件完成查找，速度慢；</p>
<pre><code>find 查找路径 匹配标准 查找到以后的处理运作
查找路径：默认为当前目录
匹配标准：默认为指定路径下的所有文件
处理运作：默认为显示


匹配标准：
-name &#39;FILENAME&#39;：对文件名作精确匹配
    文件名通配：
        *：任意长度的任意字符
        ?:任意单个字符
        []:匹配指定范围内的任意单个字符
-iname &#39;FILENAME&#39;: 文件名匹配时不区分大小写
-regex PATTERN：基于正则表达式进行文件名匹配

-user USERNAME: 根据属主查找
-group GROUPNAME: 根据属组查找

-uid UID: 根据UID查找
-gid GID: 根据GID查找

-nouser：查找没有属主的文件(删除用户之后，文件的属主则会变为用户对应的uid)
-nogroup: 查找没有属组的文件(删除组之后，文件的属组则会变为用户对应的gid)

-type 
    f: 普通文件
    d：目录文件
    c：字符设备文件
    b：块设备文件
    l：符号链接文件
    p：命名管道文件
    s：套接字文件

-size [+|-] 大小 +大于 -小于
    #k
    #M
    #G
 
-mtime：在过去n天修改过的文件（单位：天）
-ctime：在过去n天改变过的文件
-atime：在过去n天访问多的文件
    [+|-]# +代表某个时间之前，－代表最近多长时间
-mmin：在过去n分钟修改过的文件（单位：分钟）
-cmin：在过去n分钟改变过的文件
-amin：在过去n分钟访问多的文件
    [+|-]# +代表某个时间之前，－代表最近多长时间
-maxdepth:递归层数
-perm MODE：精确匹配
    /MODE: 任意一位匹配即满足条件
    -MODE: 文件权限能完全包含此MODE时才符合条件
    
    -644
    644: rw-r--r--
    755: rwxr-xr-x
    750: rwxr-x---
    find ./ -perl -001

 组合条件：以上条件之间的逻辑，
    -a：与
    -o：或
    -not： 非 
    \( \)：括号要转义

运作：
    -print: 显示
    -ls：类似ls -l的形式显示每一个文件的详细
    -ok COMMAND &#123;&#125; \; 每一次操作都需要用户确认，命令中需要文件名的地方用&#123;&#125;代替
    -exec COMMAND &#123;&#125; \;每一次操作都不需要用户确认，命令中需要文件名的地方用&#123;&#125;代替
</code></pre>
<div class="note green icon-padding flat">
<p>练习：  </p>
<p>1)在/mnt下创建boot和sysroot； </p> 
<p>2)在/mnt/boot下创建grub；  </p>
<p>3)在/mnt/sysroot下创建proc, sys, bin, sbin, lib, usr, var, etc, dev, home, root, tmp  </p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a)在/mnt/sysroot/usr下创建bin, sbin, lib  </p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b)在/mnt/sysroot/lib下创建modules  </p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c)在/mnt/sysroot/var下创建run, log, lock  </p>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d)在/mnt/sysroot/etc下创建init.d  </p>
<p>4)创建目录/backup；  </p>
<p>5)复制目录/etc至/backup目录中，并重命名为“etc-当前日期”，如etc-2013-02-26；要求保留文件原来的属性，保持链接文件；   </p>
<p>6）复制文件/etc/inittab为/tmp/inittab.new，并删除inittab.new文件的后两行； </p>
 
<pre><code>  # cp /etc/inittab  /tmp/inittab.new  
  # nano /tmp/inittab.new
</code></pre>
<p>7）描述GPL, BSD, Apache三个开源协定的大体联系及区别。</p>
<p>8）如何获取Linux当前最新的内核版本号？  </p>
      
<pre><code>  www.kernel.org
</code></pre>
<p>9）列出你所了解的Linux发行版，并说明其跟Linux内核的关系。</p>  

<pre><code>Linux, GNU: GNU/Linux, 源代码

发行版：Fedora, RedHat(CentOS), SUSE, Debian(Ubuntu, Mint), Gentoo, LFS(Linux From Scratch)
</code></pre>
<p>10）、查找/var目录下属主为root并且属组为mail的所有文件；</p>

<pre><code>find /var -user root -group mail
</code></pre>
<p>11）、查找/usr目录下不属于root,bin或student的文件；</p>

<pre><code>find /usr -not -user root -a -not -user bin -a -not -user student
find /usr -not \( -user root -o -user bin -o -user student \)
</code></pre>
<p>12）、查找/etc目录下最近一周内内容修改过且不属于root及student用户的文件；</p>

<pre><code>find /etc -mtime -7 -not \ ( -user root -o -user student \)
find /etc -mtime -7 -not -user root -a -not -user student
</code></pre>
<p>13）、查找当前系统上没有属主或属组且最近1天内曾被访问过的文件，并将其属主属组均修改为root；</p>
    
<pre><code>find / \( -nouser -o -nogroup \) -a -atime -1 -exec chown root:root &#123;&#125; \; 
</code></pre>
<p>14）、查找/etc目录下大于1M的文件，并将其文件名写入/tmp/etc.largefiles文件中；</p>
    
<pre><code>find /etc -size +1M &gt;&gt; /tmp/etc.largefiles
</code></pre>
<p>15）、查找/etc目录下所有用户都没有写权限的文件，显示出其详细信息；</p>

<pre><code>find /etc -not -perm /222 -ls	
</code></pre>
</div>

<h3 id="用户、权限和组基础"><a href="#用户、权限和组基础" class="headerlink" title="用户、权限和组基础"></a>用户、权限和组基础</h3><p>Linux的用户管理使用如下机制：  </p>
<blockquote>
<p>认证机制：Authentication（使用用户名密码）<br>授权：Authorization（使用权限管理）<br>审计：Audition (日志)</p>
</blockquote>
<p>权限：  r, w, x</p>
<ul>
<li><p>文件：  </p>
<ul>
<li>r：可读，可以使用类似cat等命令查看文件内容；  </li>
<li>w：可写，可以编辑或删除此文件；  </li>
<li>x: 可执行，exacutable，可以命令提示符下当作命令提交给内核运行；</li>
</ul>
</li>
<li><p>目录：  </p>
<ul>
<li>r: 可以对此目录执行ls以列出内部的所有文件；  </li>
<li>w: 可以在此目录创建文件；  </li>
<li>x: 可以使用cd切换进此目录，也可以使用ls -l查看内部文件的详细信息；</li>
</ul>
</li>
</ul>
<p>权限和数字对应关系：</p>
<pre><code> 0 000 ---: 无权限
 1 001 --x: 执行
 2 010 -w-: 写
 3 011 -wx: 写和执行
 4 100 r--: 只读
 5 101 r-x: 读和执行
 6 110 rw-: 读写
 7 111 rwx: 读写执行

 755：rwxr-xr-x
 640：rw-r----- 
 660: rw-rw----
 775: rwxrwxr-x
</code></pre>
<p>用户：UID, &#x2F;etc&#x2F;passwd  </p>
<pre><code>account: 登录名
password: 密码
UID：
GID：基本组ID
comment: 注释
HOME DIR：家目录
SHELL：用户的默认shell
</code></pre>
<p>组：GID, &#x2F;etc&#x2F;group  </p>
<pre><code>组名：  
密码：  
GID:  
以此组为其附加组的用户列表：
</code></pre>
<p>影子口令：  </p>
<ul>
<li><p>用户：&#x2F;etc&#x2F;shadow</p>
<pre><code>  account: 登录名  
  encrypted password: 加密的密码  
  date of last password change：最近一次修改密码的时间
  minimum password age：最短使用期限
  maximum password age：最长使用期限
  password warning period：警告时间
  password inactivity period：非活动时间
  account expiration date：账号过期时间
</code></pre>
</li>
<li><p>组：&#x2F;etc&#x2F;gshadow</p>
</li>
</ul>
<p>影子文件中存储的密码都会进行相应的单向加密，加密算法分类如下：  </p>
<ul>
<li>对称加密：加密和解密使用同一个密码  </li>
<li>公钥加密：每个密码都成对儿出现，一个为私钥(secret key)，一个为公钥(public key)  </li>
<li>单向加密，散列加密：提取数据特征码，常用于数据完整性校验  <ul>
<li>1、雪崩效应  </li>
<li>2、定长输出  </li>
<li>MD5：Message Digest, 128位定长输出  </li>
<li>SHA1：Secure Hash Algorithm, 160位定长输出</li>
</ul>
</li>
</ul>
<p>用户类别：</p>
<ul>
<li>管理员：0  </li>
<li>普通用户： 1-65535  </li>
<li>系统用户：1-499  </li>
<li>一般用户：500-60000</li>
</ul>
<p>用户组类别：</p>
<ul>
<li>私有组：创建用户时，如果没有为其指定所属的组，系统会自动为其创建一个与用户名同名的组  </li>
<li>基本组：创建用户时，指定的用户的默认组  </li>
<li>附加组，额外组：默认组以外的其它组</li>
</ul>
<h3 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h3><p>useradd  [options]  USERNAME 添加用户  </p>
<pre><code> -u UID（用户ID）
 -g GID（基本组ID\基本组名，组必须存在）
 -G GID,...  （附加组）
 -c &quot;COMMENT&quot; （注释）
 -d /path/to/directory （家目录）
 -s SHELL （指定SHELL）
 -m -k （创建家目录。-k将/etc/skel下内容复制到家目录中）
 -M （不创建家目录）
 -r: 添加系统用户
</code></pre>
<p>&#x2F;etc&#x2F;login.defs</p>
<blockquote>
<p>用于在Linux创建用户时，对用户的一些基本属性做默认设置。该配置对root用户无效。并且，当此文件中的配置与 &#x2F;etc&#x2F;passwd 和 &#x2F;etc&#x2F;shadow 文件中的用户信息有冲突时，系统会以&#x2F;etc&#x2F;passwd 和 &#x2F;etc&#x2F;shadow 为准。  </p>
</blockquote>
<p>userdel [option] USERNAME 删除用户  </p>
<pre><code> -r: 同时删除用户的家目录
</code></pre>
<p>id：查看用户的帐号属性信息  </p>
<pre><code> -u: 显示用户ID
 -g: 显示基本组ID
 -G: 显示附加组ID
 -n: 每个选项不显示ID，显示名称

[root@localhost ~]# id
uid=0(root) gid=0(root) groups=0(root) context=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023
</code></pre>
<p>finger USERNAME：查看用户账号信息</p>
<p>usermod ： 修改用户帐号属性</p>
<pre><code>   -u UID 修改用户ID
-g GID 修改基本组
-a -G GID：不使用-a选项，会覆盖此前的附加组；
-c：修改用户账户备注文字
-d -m：修改用户的家目录，-m选项是将原来家目录中的内容复制新的家目录
-s：修改用户shell
-l：修改用户帐号名称
-L：锁定帐号
-U：解锁帐号
usermod -a -G GROUPNAME，... USERNAME
</code></pre>
<p>chage ： 修改用户密码信息</p>
<pre><code>-d: 最近一次的修改时间
-E: 过期时间
-I：非活动时间
-m: 最短使用期限
-M: 最长使用期限
-W: 警告时间
</code></pre>
<p>chsh: 修改用户的默认shell</p>
<p>chfn：修改注释信息</p>
<h3 id="密码管理"><a href="#密码管理" class="headerlink" title="密码管理"></a>密码管理</h3><p>passwd [USERNAME]</p>
<pre><code> --stdin ： 从标准输入中读入，主要用于管道传入
 -l：锁定帐号 
 -u：解锁帐号  
 -d: 删除用户密码
</code></pre>
<p>pwck：检查用户帐号完整性</p>
<pre><code>[root@localhost ~]# pwck
user &#39;ftp&#39;: directory &#39;/var/ftp&#39; does not exist
user &#39;saslauth&#39;: directory &#39;/run/saslauthd&#39; does not exist
user &#39;gluster&#39;: directory &#39;/run/gluster&#39; does not exist
user &#39;pulse&#39;: directory &#39;/var/run/pulse&#39; does not exist
user &#39;gnome-initial-setup&#39;: directory &#39;/run/gnome-initial-setup/&#39; does not exist
pwck: no changes
</code></pre>
<h3 id="组管理"><a href="#组管理" class="headerlink" title="组管理"></a>组管理</h3><p>groupadd 添加组</p>
<pre><code> -g GID 指定组ID
 -r：添加为系统组
</code></pre>
<p>groupmod 修改组</p>
<pre><code> -g GID 修改组ID
 -n GRPNAME 更改组名称
</code></pre>
<p>groupdel 删除组  </p>
<p>gpasswd：为组设定密码  </p>
<pre><code>gpasswd -d A GROUP ：将用户A从GROUP组移除  
</code></pre>
<p>newgrp GRPNAME &lt;–&gt; exit：为用户指定临时基本组，需要指定组密码，用exit退出。</p>
<pre><code>[demo@localhost ~]$ id
uid=1000(demo) gid=1000(demo) groups=1000(demo) context=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023
[demo@localhost ~]$ newgrp hadoop 
Password: 
[demo@localhost ~]$ id
uid=1000(demo) gid=1001(hadoop) groups=1001(hadoop),1000(demo) context=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023
[demo@localhost ~]$ exit
exit
[demo@localhost ~]$ id
uid=1000(demo) gid=1000(demo) groups=1000(demo) context=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023
</code></pre>
<div class="note green icon-padding flat">
<p>练习：</p>  
<p>1、创建一个用户mandriva，其ID号为2002，基本组为distro（组ID为3003），附加组为linux； </p> 
 
<pre><code># groupadd -g 3003 distro
# groupadd linux
# useradd -u 2002 -g distro -G linux mandriva
</code></pre>
<p>2、创建一个用户fedora，其全名为Fedora Community，默认shell为tcsh；</p> 
  
<pre><code># useradd -c &quot;Fedora Community&quot; -s /bin/tcsh fedora
</code></pre>
<p>3、修改mandriva的ID号为4004，基本组为linux，附加组为distro和fedora；</p> 

<pre><code># usermod -u 4004 -g linux -G distro,fedora mandriva
</code></pre>
<p>4、给fedora加密码，并设定其密码最短使用期限为2天，最长为50天；</p> 

<pre><code># passwd -n 2 -x 50 fedora
</code></pre>
<p>5、将mandriva的默认shell改为/bin/bash; </p> 

<pre><code>usermod -s /bin/bash mandirva
</code></pre>
<p>6、添加系统用户hbase，且不允许其登录系统；</p> 

<pre><code># useradd -r -s /sbin/nologin hbase
</code></pre>
</div>

<h3 id="修改权限"><a href="#修改权限" class="headerlink" title="修改权限"></a>修改权限</h3><p>chown USERNAME file,…  改变文件属主(只有管理员可以使用此命令)  </p>
<pre><code> -R: 修改目录及其内部文件的属主
 --reference=/path/to/somefile file,...：将文件的属主和属组和参照文件保持一致
 
 chown    :GRPNAME file,...      ：改变文件属组信息
 chown    .GRPNAME file,...      ：改变文件属组信息
 chown USERNAME:GRPNAME file,... ：改变文件属主、属组信息
 chown USERNAME.GRPNAME file,... ：改变文件属主、属组信息
</code></pre>
<p>chgrp GRPNAME file,… 改变文件属组(只有管理员可以使用此命令)  </p>
<pre><code>-R: 修改目录及其内部文件的属组
--reference=/path/to/somefile file,...：将文件的属组和参照文件保持一致  
</code></pre>
<p>chmod MODE file,… 修改文件的权限</p>
<pre><code>-R: 修改目录及其内部文件的权限
--reference=/path/to/somefile file,... ：将文件的权限和参照文件保持一致 

修改文件权限：
chmod  MODE file,...
chomd  755 /home/demo/11.txt

修改某类用户用户权限：
u（属主）,g（属组）,o（其他）,a（所有）
chmod 用户类别=MODE file,...
chomd  u=rw /home/demo/11.txt	

修改某类用户的某位或某些位权限：
u,g,o,a
chmod 用户类别+|-MODE file,...
chmod u+w /home/demo/11.txt	
chmod ug+w /home/demo/11.txt	
chmod u+w,g+r /home/demo/11.txt
</code></pre>
<div class="note green icon-padding flat">
<p>练习：</p>  

<p>1、新建一个没有家目录的用户openstack；  </p>  

<pre><code># useradd -M openstack  
</code></pre>
<p>2、复制/etc/skel为/home/openstack；  </p>  

<pre><code># cp -r /etc/skel /home/openstack  
</code></pre>
<p>3、改变/home/openstack及其内部文件的属主属组均为openstack； </p>  
 
<pre><code># chown -R openstack:openstack /home/openstack  
</code></pre>
<p>4、/home/openstack及其内部的文件，属组和其它用户没有任何访问权限  </p>  

<pre><code># chmod -R go= /home/openstack  （不修改属主的权限） 
</code></pre>
<p>5、不用命令如何添加一个用户  </p>  

<pre><code>在/etc/passwd、/etc/shadow、/etc/group中分别添加一条记录
使用openssl passwd -1 -salt xxxxxxxx（八位随机数） password 获取加密密码
使用如上步骤
</code></pre>
</div>

<h3 id="umask-遮掩码"><a href="#umask-遮掩码" class="headerlink" title="umask(遮掩码)"></a>umask(遮掩码)</h3><p>每个用户都会有一个遮掩码，遮掩码的作用是设置用户创建文件或目录的权限。Linux文件默认不具有执行权限。</p>
<pre><code>文件权限：666-umask （文件不具有执行权限） 
目录权限：777-umask
建议用权限位相减
</code></pre>
<p>umask: 023</p>
<pre><code>文件：666-023=643 X （文件默认不能具有执行权限，如果算得的结果中有执行权限，则将其权限加1；故结果应为644）
目录：777-023=754
</code></pre>
<p>注：umask：027 创建的文件或目录其它用户无任何权限</p>
<h3 id="管道与重定向"><a href="#管道与重定向" class="headerlink" title="管道与重定向"></a>管道与重定向</h3><p>程序在运行过程中需要和I&#x2F;O设备打交道，而程序一般是不直接指定具体的输入和输出设备的。因此系统为我们提供了一些默认的输入和输出设置。</p>
<ul>
<li>默认输出设备：标准输出，STDOUT, 1（文件描述符），显示器</li>
<li>默认输入设备：标准输入, STDIN, 0（文件描述符） ，键盘  </li>
<li>标准错误输出：STDERR, 2（文件描述符）  ，显示器</li>
</ul>
<p>I&#x2F;O重定向就是修改程序的输入和输出的位置。</p>
<pre><code>&gt;:  标准输出覆盖输出
&gt;&gt;：标准输出追加输出
2&gt;: 重定向错误输出
2&gt;&gt;:重定向错误输出追加方式
&amp;&gt;: 重定向标准输出或错误输出至同一个文件
&lt;：输入重定向

&lt;&lt;：Here Document 此处生成文档
    使用：&lt;&lt;EOF或者END
         cat &lt;&lt; EOF
         cat &gt;&gt; /tmp/myfile.txt &lt;&lt; EOF

        [root@localhost ~]# cat
        this is my first line.
        this is my first line.
        this is my secondary line.
        this is my secondary line.
        ^C

        [root@localhost ~]# cat &lt;&lt; EOF
        &gt; this is my first line.
        &gt; this is my secondary line.
        &gt; EOF
        this is my first line.
        this is my secondary line.

        [root@localhost ~]# cat &gt;&gt; /tmp/myfile.txt &lt;&lt; EOF
        &gt; this is my first line.
        &gt; this is my secondary line.
        &gt; EOF

        [root@localhost ~]# cat /tmp/myfile.txt 
        this is my first line.
        this is my secondary line.
</code></pre>
<p>tee：将标准输入写入标准输出和文件<br>        echo “hello world”|tee &#x2F;tmp&#x2F;hello.out</p>
<p>set可以对系统的某些功能性选项进行开启或关闭。 </p>
<pre><code>set -C: 禁止对已经存在文件使用覆盖重定向；  
强制覆盖输出，则使用 &gt;|
set +C: 关闭上述功能
</code></pre>
<p>管道：一端流入，一端流出。即前一个命令的输出，作为后一个命令的输入。</p>
<pre><code>命令1 | 命令2 | 命令3 | ...
echo “redhat” | passwd -stdin hive：使用命令行修改用户密码
</code></pre>
<div class="note green icon-padding flat">
<p>练习：</p>
<p>1、统计/usr/bin/目录下的文件个数；</p>

<pre><code> # ls /usr/bin | wc -l
</code></pre>
<p>2、取出当前系统上所有用户的shell，要求，每种shell只显示一次，并且按顺序进行显示；</p>

<pre><code> # cut -d: -f7 /etc/passwd | sort -u
</code></pre>
<p>3、思考：如何显示/var/log目录下每个文件的内容类型？</p>

<pre><code> # file /var/log/*
 # file &#39;ls /var/log&#39;
</code></pre>
<p>4、取出/etc/inittab文件的第6行；</p>

<pre><code> # head -6 /etc/inittab | tail -1
</code></pre>
<p>5、取出/etc/passwd文件中倒数第9个用户的用户名和shell，显示到屏幕上并将其保存至/tmp/users文件中；</p>

<pre><code> # tail -9 /etc/passwd | head -1 | cut -d: -f1,7 | tee /tmp/users
</code></pre>
<p>6、显示/etc目录下所有以pa开头的文件，并统计其个数；</p>

<pre><code># ls -d /etc/pa* | wc -l
</code></pre>
<p>7、不使用文本编辑器，将alias cls=clear一行内容添加至当前用户的.bashrc文件中；</p>

<pre><code># echo &quot;alias cls=clear&quot; &gt;&gt; ~/.bashrc
</code></pre>
</div>

<h2 id="文本匹配"><a href="#文本匹配" class="headerlink" title="文本匹配"></a>文本匹配</h2><h3 id="常规正则表达式"><a href="#常规正则表达式" class="headerlink" title="常规正则表达式"></a>常规正则表达式</h3><p>grep: 根据模式搜索文本，并将符合模式的文本行显示出来。</p>
<p>Pattern（模式）: 文本字符和正则表达式的元字符组合而成匹配条件</p>
<p>grep [options] PATTERN [FILE…]</p>
<pre><code>-i:忽略大小写
--color : 匹配到的字符串亮色显示
-v: 显示没有被模式匹配到的行
-o：只显示被模式匹配到的字符串
-E：使用扩展正则表达式
-A：显示匹配字符串的前N行
-B：显示匹配字符串的后N行
-C：显示匹配字符串的前后N行
</code></pre>
<p>Pattern（模式）元字符如下：</p>
<pre><code>字符匹配：：
    .: 匹配任意单个字符
    []: 匹配指定范围内的任意单个字符
    [^]：匹配指定范围外的任意单个字符
    字符集合：[:digit:], [:lower:], [:upper:], [:punct:], [:space:], [:alpha:], [:alnum:]

匹配次数（贪婪模式）
    *: 匹配其前面的字符任意次	
    \?: 匹配其前面的字符1次或0次
    \&#123;m,n\&#125;:匹配其前面的字符至少m次，至多n次
        a, b, ab, aab, acb, adb, amnb
        a*b， a?b
        a.*b
    
        .*: 任意长度的任意字符
        \&#123;1,\&#125;
        \&#123;0,3\&#125;

位置锚定：

    ^: 锚定行首，此字符后面的任意内容必须出现在行首
    $: 锚定行尾，此字符前面的任意内容必须出现在行尾
    ^$: 空白行

    \&lt;或\b: 锚定词首，其后面的任意字符必须作为单词首部出现
    \&gt;或\b: 锚定词尾，其前面的任意字符必须作为单词的尾部出现

分组：

    \(\)
    \(ab\)* 

后向引用
        \1: 引用第一个左括号以及与之对应的右括号所包括的所有内容

如：demo
    He love his lover.
    She like her liker.
    He like his lover.
[root@localhost ~]# grep &quot;\(l..e\).*\1r\.&quot; demo
He love his lover.
She like her liker.
</code></pre>
<div class="note green icon-padding flat">

<p>练习：</p>
<p>1、显示/proc/meminfo文件中以不区分大小的s开头的行；</p>

<pre><code>grep -i &#39;^s&#39; /proc/meminfo
grep &#39;^[sS]&#39; /proc/meminfo
</code></pre>
<p>2、显示/etc/passwd中以nologin结尾的行;</p>
 
<pre><code>grep &#39;nologin$&#39; /etc/passwd
</code></pre>
<p>3、取出默认shell为/sbin/nologin的用户列表</p>

<pre><code>grep &quot;nologin$&#39; /etc/passwd | cut -d: -f1
</code></pre>
<p>4、取出默认shell为bash，且其用户ID号最小的用户的用户名</p>

<pre><code>grep &#39;bash$&#39; /etc/passwd | sort -n -t: -k3 | head -1 | cut -d: -f1
</code></pre>
<p>5、显示/etc/inittab中以#开头，且后面跟一个或多个空白字符，而后又跟了任意非空白字符的行；</p>
    
<pre><code>grep &quot;^#[[:space:]]\&#123;1,\&#125;[^[:space:]]&quot; /etc/inittab
</code></pre>
<p>6、显示/etc/inittab中包含了:一个数字:(即两个冒号中间一个数字)的行；</p>
    grep ':[0-9]:' /etc/inittab

<p>7、显示/boot/grub/grub.conf文件中以一个或多个空白字符开头的行；</p>
    
<pre><code>grep &#39;^[[:space:]]\&#123;1,\&#125;&#39; /boot/grub/grub.conf
</code></pre>
<p>8、显示/etc/inittab文件中以一个数字开头并以一个与开头数字相同的数字结尾的行；</p>

<pre><code>grep &#39;^\([0-9]\).*\1$&#39; /etc/inittab
</code></pre>
<p>9、找出某文件中的，1位数，或2位数；</p>

<pre><code>grep &#39;[0-9]\&#123;1,2\&#125;&#39; /proc/cpuinfo
grep --color &#39;\&lt;[0-9]\&#123;1,2\&#125;\&gt;&#39; /proc/cpuinfo
</code></pre>
<p>10、找出ifconfig命令结果中的1-255之间的整数；</p>

  
<p>9、查找当前系统上名字为student(必须出现在行首)的用户的帐号的相关信息, 文件为/etc/passwd</p>
    
<pre><code>grep &#39;^student\&gt;&#39; /etc/passwd | cut -d: -f3
id -u student
</code></pre>
<p>10、 分析/etc/inittab文件中如下文本中前两行的特征(每一行中出现在数字必须相同)，请写出可以精确找到类似两行的模式：</p>

<pre><code>l1:1:wait:/etc/rc.d/rc 1
l3:3:wait:/etc/rc.d/rc 3

grep &#39;^l\([0-9]\):\1.*\1$&#39; /etc/inittab
</code></pre>
</div>

<h3 id="扩展正则表达式"><a href="#扩展正则表达式" class="headerlink" title="扩展正则表达式"></a>扩展正则表达式</h3><pre><code>grep -E = egrep

    字符匹配：
        .
        []
        [^]

    次数匹配：
        *: 
        ?:
        +: 匹配其前面的字符至少1次
        &#123;m,n&#125;

    位置锚定：
        ^
        $
        \&lt;
        \&gt;

    分组：
        ()：分组
        \1, \2, \3, ...

    或者
        |: or
        C|cat: 为 C或cat 不是 Cat或cat
</code></pre>
<div class="note green icon-padding flat">
<p>练习：</p>
<p>1、显示所有以数字结尾且文件名中不包含空白的文件；</p>
    
<pre><code>ls *[^[:space:]]*[0-9]   ?????????
</code></pre>
<p>2、找出/boot/grub/grub.conf文件中1-255之间的数字；</p>
    
<pre><code>\&lt;([1-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\&gt;
ifconfig | egrep &#39;\&lt;([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\&gt;\.\&lt;([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\&gt;\.\&lt;([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\&gt;\.\&lt;([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\&gt;&#39; 

ifconfig | egrep --color &#39;(\&lt;([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\&gt;\.)&#123;3&#125;\&lt;([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\&gt;&#39;

只查找前三类IP地址：（1-223）
\&lt;([1-9]|[1-9][0-9]|1[0-9]&#123;2&#125;|2[01][0-9]|22[0-3])\&gt;(\.\&lt;([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-4])\&gt;)&#123;2&#125;\.\&lt;([1-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-4])\&gt;
</code></pre>
</div>

<h2 id="权限提升"><a href="#权限提升" class="headerlink" title="权限提升"></a>权限提升</h2><p>   su [-l] 用户名：切换用户<br>   sudo COMMAND：完成部分特权指令</p>
<pre><code>配置文件/etc/sudoers文件中的如下行： 
106 ## Allows people in group wheel to run all commands
107 %wheel  ALL=(ALL)       ALL
</code></pre>
<h2 id="特殊权限"><a href="#特殊权限" class="headerlink" title="特殊权限"></a>特殊权限</h2><p>SUID: 运行某程序时，相应进程的属主是程序文件自身的属主，而不是启动者；</p>
<pre><code>chmod u+s FILE
chmod u-s FILE
    如果FILE本身原来就有执行权限，则SUID显示为s；否则显示S；
</code></pre>
<p>SGID: 运行某程序时，相应进程的属组是程序文件自身的属组，而不是启动者所属的基本组；同时该文件夹下所创建文件的属组是文件夹的属组，而不是创建用户的属组。</p>
<pre><code>chmod g+s FILE
chmod g-s FILE
    develop team, hadoop, hbase, hive
    /tmp/project/
        develop
</code></pre>
<p>Sticky: 在一个公共目录，每个都可以创建文件，删除自己的文件，但不能删除别人的文件；</p>
<pre><code>chmod o+t DIR
chmod o-t DIR
</code></pre>
<p>注：以上三种权限就像rwx一样，也可以使用数字表示。比如 chmod 5755 &#x2F;backup&#x2F;test，而且umask的第一位数字代表的就是这三种权限。</p>
<h2 id="文件系统访问列表"><a href="#文件系统访问列表" class="headerlink" title="文件系统访问列表"></a>文件系统访问列表</h2><p>FACL(Filesystem Access Control List):利用文件扩展保存额外的访问控制权限 </p>
<p>setfacl</p>
<pre><code>-m: 设定
    u:UID:perm
    d:u：UID：perm 对目录有用，该目录下的新建文件拥有此默认权限
    g:GID:perm
    d:g：GID：perm 对目录有用，该目录下的新建文件拥有此默认权限
-x：取消
    u:UID
    g:GID
</code></pre>
<p>getfacl：查看文件系统访问权限</p>
<pre><code>[demo@localhost ~]$ getfacl demo.txt 
# file: demo.txt
# owner: demo
# group: demo
user::rw-
group::rw-
mask::rw- (这个会根据自动变化，为文件的最大权限)
other::r--

[demo@localhost ~]$ setfacl -m u:demo2:rwx demo.txt 
[demo@localhost ~]$ getfacl demo.txt 
# file: demo.txt
# owner: demo
# group: demo
user::rw-
user:demo2:rwx
group::rw-
mask::rwx (这个会根据自动变化，为文件的最大权限)
other::r--

// 目录下设置默认权限
[demo@localhost ~]$ setfacl -m d:u:demo2:rw- Desktop/
[demo@localhost ~]$ cd Desktop/
[demo@localhost Desktop]$ ll
total 0

[demo@localhost Desktop]$ touch demo2.txt

[demo@localhost Desktop]$ getfacl demo2.txt 
# file: demo2.txt
# owner: demo
# group: demo
user::rw-
user:demo2:rw-
group::r-x			#effective:r--
mask::rw-
other::r--

[demo@localhost ~]$ ll
total 4
-rw-rwxr--+ 1 demo demo 18 Dec 17 11:28 demo.txt  （具有acl属性权限结尾会有+）
drwxr-xr-x+ 2 demo demo 23 Dec 25 04:42 Desktop
</code></pre>
<h2 id="压缩与解压缩"><a href="#压缩与解压缩" class="headerlink" title="压缩与解压缩"></a>压缩与解压缩</h2><p>压缩算法不同，压缩比也会不同。常见的压缩格式有：gz, bz2, xz, zip, Z</p>
<p>Z格式（只能压缩单个文件。如果是文件夹，则是压缩文件夹内的每个文件）</p>
<pre><code>compress FILENAME
uncompress 

[demo@localhost ~]$ compress inittab 
-rw-r--r--. 1 demo demo 390 Dec 29 09:24 inittab.Z
[demo@localhost ~]$ uncompress inittab.Z 
-rw-r--r--. 1 demo demo 511 Dec 29 09:24 inittab
</code></pre>
<p>gz格式（只能压缩单个文件。如果是文件夹，则是压缩文件内的每个文件）</p>
<pre><code>gzip /PATH/TO/SOMEFILE：压缩完成后会删除原文件
    -d：解压
    -#：1-9，指定压缩比，默认是6；

gunzip /PATH/TO/SOMEFILE.gz: 解压完成后会删除原文件
zcat /PATH/TO/SOMEFILE.gz： 不解压的情况，查看文本文件的内容

[demo@localhost ~]$ gzip inittab
-rw-r--r--. 1 demo demo 316 Dec 29 09:24 inittab.gz
</code></pre>
<p>bz2格式，该格式比gz有着更大压缩比（只能压缩单个文件。如果是文件夹，则是压缩文件内的每个文件）</p>
<pre><code>bzip2 /PATH/TO/SOMEFILE
        -d: 解压
        -#: 1-9,默认是6
        -k: 压缩时保留原文件
        
bunzip2 /PATH/TO/SOMEFILE.bz2  解压完成后会删除原文件
bzcat 不解压的情况，查看文本文件的内容

[demo@localhost ~]$ bzip2 inittab 
-rw-r--r--. 1 demo demo 349 Dec 29 09:24 inittab.bz2
</code></pre>
<p>xz格式：（只能压缩单个文件。如果是文件夹，则是压缩文件内的每个文件）</p>
<pre><code>xz /PATH/TO/SOMEFILE
    -d：解压
    -#: 1-9, 默认是6
    -k: 压缩时保留原文件
        
unxz：解压
xzdec:解压
xzcat：不解压的情况，查看文本文件的内容。

[demo@localhost ~]$ xz inittab 
-rw-r--r--. 1 demo demo 372 Dec 29 09:24 inittab.xz
</code></pre>
<p>注：以上压缩和解压会删除原文件  </p>
<p>zip: 既归档（可以指定文件夹压缩）又压缩的工具  </p>
<pre><code>zip FILENAME.zip FILE1 FILE2 ...: 压缩后不删除原文件
unzip FILENAME.zip ：解压
</code></pre>
<p>tar: 归档工具, .tar</p>
<pre><code>-c: 创建归档文件
-f FILE.tar: 操作的归档文件（压缩时是压缩后文件名，解压时是解压的文件名）
-x: 展开归档
--xattrs: 归档时，保留文件的扩展属性信息
-t: 不展开归档，直接查看归档了哪些文件
-C: 在解压时指定解压后文件的存放位置
-zcf: 归档并调用gzip压缩
-zxf: 调用gzip解压缩并展开归档，-z选项可省略


-jcf: 归档并调用bzip2压缩
-jxf:

-Jcf: 归档并调xz压缩
-Jxf:

[demo@localhost etc]$ tar -Jcf conf.tar.xz ./etc  压缩
[demo@localhost etc]$ tar -zxf conf.tar.xz -C ./etc/ 解压
</code></pre>
<p>cpio: 归档工具，不常用</p>
<h2 id="其它命令"><a href="#其它命令" class="headerlink" title="其它命令"></a>其它命令</h2><p>w：显示目前登陆系统的用户信息（su 切换用户还是显示原用户）</p>
<pre><code>[demo@localhost ~]$ w
 04:52:09 up 33 min,  2 users,  load average: 0.00, 0.03, 0.13
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
demo     :0       :0               04:20   ?xdm?   1:12   0.26s /usr/libexec/gn
demo     pts/0    :0               04:21    1.00s  0.49s  0.01s w
</code></pre>
<p>who：显示当前登录系统的用户（w的简化版）</p>
<pre><code>[demo2@localhost demo]$ who
demo     :0           2021-12-25 04:20 (:0)
demo     pts/0        2021-12-25 04:21 (:0)
</code></pre>
<p>sleep #：等待多少秒<br>whoami：显示当前用户</p>
<pre><code>[demo2@localhost demo]$ whoami
demo2
</code></pre>
<p>last，显示&#x2F;var&#x2F;log&#x2F;wtmp文件，显示用户登录历史及系统重启历史  </p>
<pre><code>-n #: 显示最近#次的相关信息

[demo2@localhost demo]$ last
demo     pts/0        :0               Sat Dec 25 04:21   still logged in   
demo     :0           :0               Sat Dec 25 04:20   still logged in   
demo     :0           :0               Sat Dec 25 04:20 - 04:20  (00:00)    
reboot   system boot  3.10.0-1062.el7. Sat Dec 25 04:19 - 04:57  (00:38)    
demo     pts/0        :0               Fri Dec 17 11:27 - 11:34  (00:06)    
demo     :0           :0               Fri Dec 17 11:25 - crash (7+16:53) 
</code></pre>
<p>lastb，&#x2F;var&#x2F;log&#x2F;btmp文件，显示用户错误的登录尝试  </p>
<pre><code>-n #:
[root@localhost demo]# lastb
demo2    pts/0                         Sat Dec 25 04:59 - 04:59  (00:00)    

btmp begins Sat Dec 25 04:59:30 2021
</code></pre>
<p>lastlog: 显示每一个用户最近一次的成功登录信息；</p>
<pre><code>-u USERNAME: 显示特定用户最近的登录信息
[root@localhost demo]# lastlog
Username         Port     From             Latest
root             pts/0                     Sat Dec 25 04:59:06 -0500 2021
bin                                        **Never logged in**
daemon                                     **Never logged in**
adm                                        **Never logged in**
lp                                         **Never logged in**
</code></pre>
<p>basename：获取文件名</p>
<pre><code>$0: 执行脚本时的脚本路径及名称
[root@localhost demo]# basename /home/demo/demo.txt
demo.txt
</code></pre>
<p>mail：发送邮件</p>
<pre><code>[root@localhost demo]# mail -s &quot;first&quot; demo &lt; demo.txt 
[root@localhost demo]# su - demo
Last login: Sat Dec 25 04:59:21 EST 2021 on pts/0
[demo@localhost ~]$ mail
Heirloom Mail version 12.5 7/5/10.  Type ? for help.
&quot;/var/spool/mail/demo&quot;: 1 message 1 new
&gt;N  1 root                  Sat Dec 25 05:10  18/617   &quot;first&quot;
&amp; 1
Message  1:
From root@localhost.localdomain  Sat Dec 25 05:10:07 2021
Return-Path: &lt;root@localhost.localdomain&gt;
X-Original-To: demo
Delivered-To: demo@localhost.localdomain
Date: Sat, 25 Dec 2021 05:10:06 -0500
To: demo@localhost.localdomain
Subject: first
User-Agent: Heirloom mailx 12.5 7/5/10
Content-Type: text/plain; charset=us-ascii
From: root@localhost.localdomain (root)
Status: R

this is new file.

&amp; 
注：用户邮件目录在/var/spool/mail
</code></pre>
<p>hostname: 显示主机名</p>
<pre><code>如果当前主机的主机名不是www.magedu.com，就将其改为www.magedu.com

如果当前主机的主机名是localhost，就将其改为www.magedu.com

如果当前主机的主机名为空，或者为(none)，或者为localhost，就将其改为www.magedu.com
[ -z `hostname` ] || [ `hostname` == &#39;(none)&#39; -o `hostname` == &#39;localhost&#39; ] &amp;&amp; hostname www.magedu.com
</code></pre>
<p>生成随机数RANDOM: 0-32768</p>
<pre><code>随机数生成器：熵池(收集系统产生中断的时间作为随机数)
/dev/random:(收集系次产生中断的时间作为随机数，如果不足需要等待)
/dev/urandom:(收集系统产生中断的时间作为随机数，如果不足则自行生成随机数)

[demo@localhost mail]$ echo $RANDOM
12963
</code></pre>
<p>ln [-s -v] SRC DEST：建立符号链接</p>
<pre><code>-s：建立软链接
-v：建立硬链接

[demo@localhost ~]$ ln -s /etc/inittab ./

[root@localhost demo]# ln -v /etc/inittab inittab1 
‘inittab1’ =&gt; ‘/etc/inittab’

[root@localhost demo]# ll
total 8
-rw-rwxr--+ 1 demo demo  18 Dec 17 11:28 demo.txt
drwxr-xr-x+ 2 demo demo  23 Dec 25 04:42 Desktop
drwxr-xr-x. 2 demo demo   6 Dec 17 11:17 Documents
drwxr-xr-x. 2 demo demo   6 Dec 17 11:17 Downloads
lrwxrwxrwx. 1 demo demo  12 Dec 25 05:48 inittab -&gt; /etc/inittab
-rw-r--r--. 2 root root 511 Aug  8  2019 inittab1
drwxr-xr-x. 2 demo demo   6 Dec 17 11:17 Music
drwxr-xr-x. 2 demo demo   6 Dec 17 11:17 Pictures
drwxr-xr-x. 2 demo demo   6 Dec 17 11:17 Public
drwxr-xr-x. 2 demo demo   6 Dec 17 11:17 Templates
drwxr-xr-x. 2 demo demo   6 Dec 17 11:17 Videos

硬链接：（存储文件的inode）
    1、只能对文件创建，不能应用于目录；
    2、不能跨文件系统；
    3、创建硬链接会增加文件被链接的次数；
    
符号链接：（存储文件的字符串）
    1、可应用于目录；
    2、可以跨文件系统；
    3、不会增加被链接文件的链接次数；
    4、其大小为指定的路径所包含的字符个数；
</code></pre>
<p>du </p>
<pre><code>-s ：查看文件夹总大小
-h ：单位换算

[root@localhost etc]# du
20	./fonts/conf.d
24	./fonts
72	./grub.d
12	./pki/rpm-gpg
156	./pki/ca-trust/extracted/java
......
42436
[root@localhost etc]# du -s
42436	.
[root@localhost etc]# du -sh
42M
</code></pre>
<p>df: </p>
<pre><code>-h：查看各文件系统的存储  
-i：查看各文件系统inode的使用量

[root@localhost etc]# df -h
Filesystem               Size  Used Avail Use% Mounted on
devtmpfs                 470M     0  470M   0% /dev
tmpfs                    487M     0  487M   0% /dev/shm
tmpfs                    487M  8.7M  478M   2% /run
tmpfs                    487M     0  487M   0% /sys/fs/cgroup
/dev/mapper/centos-root   17G  4.2G   13G  25% /
/dev/sda1               1014M  171M  844M  17% /boot
tmpfs                     98M  4.0K   98M   1% /run/user/42
tmpfs                     98M   28K   98M   1% /run/user/1000
/dev/sr0                 4.4G  4.4G     0 100% /run/media/demo/CentOS 7 x86_64
tmpfs                     98M     0   98M   0% /run/user/0

[root@localhost etc]# df -i
Filesystem               Inodes  IUsed   IFree IUse% Mounted on
devtmpfs                 120210    391  119819    1% /dev
tmpfs                    124468      1  124467    1% /dev/shm
tmpfs                    124468    995  123473    1% /run
tmpfs                    124468     16  124452    1% /sys/fs/cgroup
/dev/mapper/centos-root 8910848 155245 8755603    2% /
/dev/sda1                524288    340  523948    1% /boot
tmpfs                    124468      6  124462    1% /run/user/42
tmpfs                    124468     19  124449    1% /run/user/1000
/dev/sr0                      0      0       0     - /run/media/demo/CentOS 7 x86_64
tmpfs                    124468      1  124467    1% /run/user/0
</code></pre>
<h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><p>终端类型：</p>
<pre><code>console: 控制台 直接连接在计算机上的显示器、鼠标、键盘
pty: 物理终端 (VGA) 
tty#: 虚拟终端 (VGA) 服务器
ttyS#: 串行终端
pts/#: 伪终端 通过ssh等登陆到linux主机上所使用的终端
</code></pre>
<p>计算机总线：  </p>
<ul>
<li>地址总线：内存寻址  </li>
<li>数据总线：传输数据  </li>
<li>控制总线：控制指令</li>
</ul>
<p>进程：在每个进程看来，当前主机上只存在内核和当前进程。进程是程序的副本，进程是程序执行实例  </p>
<p>环境变量：  </p>
<pre><code>PATH  
HISTSIZE  
SHELL：用户当前使用SHELL  
</code></pre>
<p>LANG&#x3D;en 修改Linux编码  </p>
<p>read ： 从标准输入中读取数据，并以空格切分。将分割结果存入后面参数中的变量。具体使用参见：<br><a target="_blank" rel="noopener" href="https://www.runoob.com/linux/linux-comm-read.html">https://www.runoob.com/linux/linux-comm-read.html</a>  </p>
<pre><code>-p “PROMPT&quot;: 给出提示
    
</code></pre>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">QiYan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2022/11/25/Linux-basic/">http://example.com/2022/11/25/Linux-basic/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">知与行</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a></div><div class="post_share"><div class="social-share" data-image="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/11/27/Linux-file/"><img class="prev-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Linux文件系统</div></div></a></div><div class="next-post pull-right"><a href="/2022/11/24/MakeBlog/"><img class="next-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">搭建个人博客</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">QiYan</div><div class="author-info__description">学而不思则惘 思而不学则殆</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">13</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">17</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content"></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E5%88%99"><span class="toc-number">1.</span> <span class="toc-text">Linux的基本原则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux%E4%BA%A4%E4%BA%92"><span class="toc-number">2.</span> <span class="toc-text">Linux交互</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Shell%E5%88%86%E7%B1%BB"><span class="toc-number">2.1.</span> <span class="toc-text">Shell分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bash%E7%89%B9%E6%80%A7"><span class="toc-number">2.2.</span> <span class="toc-text">bash特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%99%BB%E9%99%86%E5%BC%8Fshell%E5%92%8C%E9%9D%9E%E7%99%BB%E9%99%86%E5%BC%8Fshell"><span class="toc-number">2.3.</span> <span class="toc-text">登陆式shell和非登陆式shell</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95"><span class="toc-number">3.</span> <span class="toc-text">Linux文件目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4"><span class="toc-number">4.</span> <span class="toc-text">Linux基础命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E5%9F%BA%E7%A1%80"><span class="toc-number">4.1.</span> <span class="toc-text">命令基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9"><span class="toc-number">4.2.</span> <span class="toc-text">查看命令帮助</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E7%AE%A1%E7%90%86"><span class="toc-number">4.3.</span> <span class="toc-text">时间管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86"><span class="toc-number">4.4.</span> <span class="toc-text">目录管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="toc-number">4.5.</span> <span class="toc-text">文件操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%96%87%E6%9C%AC"><span class="toc-number">4.6.</span> <span class="toc-text">查看文本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86"><span class="toc-number">4.7.</span> <span class="toc-text">文本处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%E6%9F%A5%E6%89%BE"><span class="toc-number">4.8.</span> <span class="toc-text">文本查找</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E3%80%81%E6%9D%83%E9%99%90%E5%92%8C%E7%BB%84%E5%9F%BA%E7%A1%80"><span class="toc-number">4.9.</span> <span class="toc-text">用户、权限和组基础</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-number">4.10.</span> <span class="toc-text">用户管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%86%E7%A0%81%E7%AE%A1%E7%90%86"><span class="toc-number">4.11.</span> <span class="toc-text">密码管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E7%AE%A1%E7%90%86"><span class="toc-number">4.12.</span> <span class="toc-text">组管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%9D%83%E9%99%90"><span class="toc-number">4.13.</span> <span class="toc-text">修改权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#umask-%E9%81%AE%E6%8E%A9%E7%A0%81"><span class="toc-number">4.14.</span> <span class="toc-text">umask(遮掩码)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%A1%E9%81%93%E4%B8%8E%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">4.15.</span> <span class="toc-text">管道与重定向</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%E5%8C%B9%E9%85%8D"><span class="toc-number">5.</span> <span class="toc-text">文本匹配</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%84%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">5.1.</span> <span class="toc-text">常规正则表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">5.2.</span> <span class="toc-text">扩展正则表达式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87"><span class="toc-number">6.</span> <span class="toc-text">权限提升</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90"><span class="toc-number">7.</span> <span class="toc-text">特殊权限</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E8%AE%BF%E9%97%AE%E5%88%97%E8%A1%A8"><span class="toc-number">8.</span> <span class="toc-text">文件系统访问列表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%8B%E7%BC%A9%E4%B8%8E%E8%A7%A3%E5%8E%8B%E7%BC%A9"><span class="toc-number">9.</span> <span class="toc-text">压缩与解压缩</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E5%AE%83%E5%91%BD%E4%BB%A4"><span class="toc-number">10.</span> <span class="toc-text">其它命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E5%AE%83"><span class="toc-number">11.</span> <span class="toc-text">其它</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/11/29/Linux-start/" title="Linux系统启动流程(参考)">Linux系统启动流程(参考)</a><time datetime="2022-11-29T07:45:07.822Z" title="发表于 2022-11-29 15:45:07">2022-11-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/11/27/Linux-crond/" title="Linux计划任务和日志">Linux计划任务和日志</a><time datetime="2022-11-28T02:39:38.213Z" title="发表于 2022-11-28 10:39:38">2022-11-28</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/11/27/Linux-shell/" title="Shell编程">Shell编程</a><time datetime="2022-11-27T14:05:00.135Z" title="发表于 2022-11-27 22:05:00">2022-11-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/11/27/Linux-program/" title="Linux进程管理">Linux进程管理</a><time datetime="2022-11-27T13:35:48.747Z" title="发表于 2022-11-27 21:35:48">2022-11-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/11/27/combute-basic/" title="计算机基础">计算机基础</a><time datetime="2022-11-27T13:25:06.024Z" title="发表于 2022-11-27 21:25:06">2022-11-27</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By QiYan</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>