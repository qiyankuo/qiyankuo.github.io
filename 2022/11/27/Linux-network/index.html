<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Linux网络基础 | 知与行</title><meta name="author" content="QiYan"><meta name="copyright" content="QiYan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="网络功能是计算机之间通信的基础，也是一个操作系统的重要组成部分。本文主要介绍Linux网络相关配置。      网络基础计算机网络实现了计算机之间的通信，我们可以通过两个层面来了解计算机网络。第一层面是物理层面，即计算机之间的连接线和设备；第二层面是计算机通信所采用的协议。我们首先了解一下计算机网络的物理层面。为了实现计算机之间的通信，我们首先通过线缆将各个计算机连接起来。为了在网络中识别各个计">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux网络基础">
<meta property="og:url" content="http://example.com/2022/11/27/Linux-network/index.html">
<meta property="og:site_name" content="知与行">
<meta property="og:description" content="网络功能是计算机之间通信的基础，也是一个操作系统的重要组成部分。本文主要介绍Linux网络相关配置。      网络基础计算机网络实现了计算机之间的通信，我们可以通过两个层面来了解计算机网络。第一层面是物理层面，即计算机之间的连接线和设备；第二层面是计算机通信所采用的协议。我们首先了解一下计算机网络的物理层面。为了实现计算机之间的通信，我们首先通过线缆将各个计算机连接起来。为了在网络中识别各个计">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-11-27T13:24:30.781Z">
<meta property="article:modified_time" content="2022-11-27T13:24:30.781Z">
<meta property="article:author" content="QiYan">
<meta property="article:tag" content="network">
<meta name="twitter:card" content="summary"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2022/11/27/Linux-network/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux网络基础',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-11-27 21:24:30'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/font.css"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="知与行" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">20</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">21</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">知与行</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Linux网络基础</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-11-27T13:24:30.781Z" title="发表于 2022-11-27 21:24:30">2022-11-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-27T13:24:30.781Z" title="更新于 2022-11-27 21:24:30">2022-11-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">2.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>12分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Linux网络基础"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><div class="note blue icon-padding flat">
<p>网络功能是计算机之间通信的基础，也是一个操作系统的重要组成部分。本文主要介绍Linux网络相关配置。</P>  
</div>


<h2 id="网络基础"><a href="#网络基础" class="headerlink" title="网络基础"></a>网络基础</h2><p>计算机网络实现了计算机之间的通信，我们可以通过两个层面来了解计算机网络。第一层面是物理层面，即计算机之间的连接线和设备；第二层面是计算机通信所采用的协议。我们首先了解一下计算机网络的物理层面。为了实现计算机之间的通信，我们首先通过线缆将各个计算机连接起来。为了在网络中识别各个计算机，我们给每个计算机分配一个MAC地址（位于网卡上）用于标识该计算机。</p>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEBf9f8be84ece7c84b15d27b8403b926f7?method=download&shareKey=cc97eec71b385792e190e815117b6031" alt="image"></p>
<p>由于一根线上在某一时刻只能传输某一个计算机的信息，否则会造成信号相互冲突。为了避免以上情况，引入了载波监听多路访问&#x2F;冲突检测机制。该机制是当计算机发送信息前，先监听线路中是否正在发送信息，如果没有则发送，否则等待。同时，在计算机发送信号之后，仍需继续侦听信道，当检测到冲突后马上迅速取消信息的传输并等待。</p>
<p>随着一根线上接入的计算机越来越多，发送信息时计算机冲突等待的时间也就越来越长。为此，我们可以将一个网络分成多个网络，网络之间使用网桥连接。网桥是一个智能设备，内部维护了一张MAC地址表。当A向D发送信息时，网桥左面的接口接收到信息查看MAC表显示D在来源接口所在的网络，网桥则会忽略该信息。网桥内部的MAC表可以人为指定，也可以自己学习。自己学习是根据接受信息的来源地址进行学习，如果在MAC表中查找目标地址不存在则会向网桥所有端口转发。</p>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEB1bd50147127bd04dc2814f97780144be?method=download&shareKey=3bf691f9fc190026d0cc77e3f52d6926" alt="image"></p>
<p>随着不断发展，交换机取代了网桥。目前，我们将计算机直接连接到交换机的端口上，交换机内部也有一个MAC地址表。而且目前的网线一般都是全双工的（即内部包含两条线，一条发送信息，一条接受信息）。在计算机进行通信时，计算机一般会发送广播询问目标的地址。但是交换机并不能隔离广播，路由器的作用便是隔离广播。路由器的存在虽然隔离了广播，但是也造成我们无法确定目标主机是否存在。为了解决该问题，我们引入了IPV4地址。在通信时，计算机根据IPV4地址判断目标主机是否和自己在同一网段，如果在同一网段则可以通过交换机直接通信。如果不在同一网段，计算机则将信息发送给路由器，路由器根据路由配置进行转发。</p>
<p><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fwww.51wendang.com%2Fpic%2Fc1074616c12f52cc16eef53f%2F5-492-png_6_0_0_162_448_622_372_892.979_1262.879-823-0-0-823.jpg&refer=http%3A%2F%2Fwww.51wendang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1643791840&t=5377c338817383119402d7b2035b5756" alt="image"></p>
<p>以上的物理层面保证了计算机可以相互之间发送和接受信息，而协议层面则规定了计算机发送信息的格式。目前的协议层面我们常用的是TCP&#x2F;IP协议。</p>
<p><img src="https://note.youdao.com/yws/api/personal/file/WEBf00acbc1e730228b2a39f1a697f02ef3?method=download&shareKey=754667e281d8fa53a84cb867ca131c95" alt="image"></p>
<p>在这些层中，IP层是实现点到点的通信。而传输层是实现进程到进程的通信。</p>
<p>具体网络协议基础可以查看：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/imyalost/p/6086808.html">https://www.cnblogs.com/imyalost/p/6086808.html</a></p>
<h2 id="Linux网络配置"><a href="#Linux网络配置" class="headerlink" title="Linux网络配置"></a>Linux网络配置</h2><p>   ethX：代表的是以太网。IP地址虽然配置在网卡上，但是IP地址是属于内核的，即数据可以通过一个网卡采用其它网卡的IP访问计算机。</p>
<p>   网卡名称定义地址：</p>
<pre><code>RHEL5: /etc/modprobe.conf
          alias 
RHEL6: /etc/udev/rules.d/70-persistent-net.rules（配置网卡名称和MAC地址）

[root@Worker11 ~]# cat /etc/udev/rules.d/70-persistent-net.rules 
# This file was automatically generated by the /lib/udev/write_net_rules
# program, run by the persistent-net-generator.rules rules file.
#
# You can modify it, as long as you keep each rule on a single
# line, and change only the value of the NAME= key.
    
    
# PCI device 0x8086:0x100f (e1000)
SUBSYSTEM==&quot;net&quot;, ACTION==&quot;add&quot;, DRIVERS==&quot;?*&quot;, ATTR&#123;address&#125;==&quot;00:0c:29:8f:62:94&quot;, ATTR&#123;type&#125;==&quot;1&quot;, KERNEL==&quot;eth*&quot;, NAME=&quot;eth0&quot; 
</code></pre>
<h3 id="查看网络信息"><a href="#查看网络信息" class="headerlink" title="查看网络信息"></a>查看网络信息</h3><pre><code>ifconfig [ethX] 
    -a: 显示所有接口的配置信息

    [root@Worker11 ~]# ifconfig
    eth0      Link encap:Ethernet  HWaddr 00:0C:29:8F:62:94（物理地址）  
              inet addr:192.168.25.11（IP地址）  Bcast:192.168.25.255（广播地址）  Mask:255.255.255.0（子网掩码）
              inet6 addr: fe80::20c:29ff:fe8f:6294/64 Scope:Link
              UP（启用） BROADCAST（广播地址有效） RUNNING（动作） MULTICAST（多播地址有效）  MTU:1500  Metric:1

              RX packets:464 errors:0 dropped:0 overruns:0 frame:0（接受数据）
              TX packets:106 errors:0 dropped:0 overruns:0 carrier:0（发送数据）
              collisions:0 txqueuelen:1000 
              RX bytes:36689 (35.8 KiB)  TX bytes:13139 (12.8 KiB)
    
    lo        Link encap:Local Loopback  
              inet addr:127.0.0.1  Mask:255.0.0.0
              inet6 addr: ::1/128 Scope:Host
              UP LOOPBACK RUNNING  MTU:65536  Metric:1
              RX packets:0 errors:0 dropped:0 overruns:0 frame:0
              TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
              collisions:0 txqueuelen:0 
              RX bytes:0 (0.0 b)  TX bytes:0 (0.0 b)

ifconfig ethX IP/MASK [up|down] 
    配置的地址立即生效，但重启网络服务或主机，都会失效；
    ifconfig eth0 192.168.20.12/24 修改网卡地址，即时生效
    ifconfig eth0 down：关闭eth0网卡
    ifconfig eth0 up：开启eth0网卡
    
</code></pre>
<h3 id="重启网络服务："><a href="#重启网络服务：" class="headerlink" title="重启网络服务："></a>重启网络服务：</h3><p>RHEL5:	&#x2F;etc&#x2F;init.d&#x2F;network {start|stop|restart|status}</p>
<p>RHEL6:  &#x2F;etc&#x2F;init.d&#x2F;NetworkManager {start|stop|restart|status}<br>        service network {start|stop|restart|status}（我一般使用这个）</p>
<p>RHEL7:  systemctl {start|stop|restart|status} network</p>
<h3 id="路由："><a href="#路由：" class="headerlink" title="路由："></a>路由：</h3><p>查看：  </p>
<pre><code>route -n: 以数字方式显示各主机或端口等相关信息，否则可能会显示对应IP的主机名

[demo@localhost rules.d]$ route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
192.168.122.0   0.0.0.0         255.255.255.0   U     0      0        0 virbr0
</code></pre>
<p>网关：   </p>
<pre><code>route 
    add: 添加
        -host: 主机路由
        -net：网络路由
        -net 0.0.0.0
    route add -net|-host DEST gw NEXTHOP
    route add default gw NEXTHOP

    route add -net 10.0.1.0/24 gw 192.168.100.6
    [root@localhost ~]# route add -net 192.168.20.0/24 gw 192.168.122.254

    del：删除
        -host
        -net 
        
        route del -net 10.0.0.0/8 
        route del -net 0.0.0.0
        route del default

所做出的改动重启网络服务或主机后失效；
</code></pre>
<h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><p>网络接口配置文件：  </p>
<p>&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-INTERFACE_NAME</p>
<pre><code>DEVICE=: 关联的设备名称，要与文件名的后半部“INTERFACE_NAME”保持一致; 
BOOTPROTO=&#123;static|none|dhcp|bootp&#125;: 引导协议；要使用静态地址，使用static或none；dhcp表示使用DHCP服务器获取地址；
IPADDR=: IP地址
NETMASK=：子网掩码
GATEWAY=：设定默认网关；
ONBOOT=：开机时是否自动激活此网络接口；
HWADDR=： 硬件地址，要与硬件中的地址保持一致；可省；
USERCTL=&#123;yes|no&#125;: 是否允许普通用户控制此接口；
PEERDNS=&#123;yes|no&#125;: 是否在BOOTPROTO为dhcp时接受由DHCP服务器指定的DNS地址；

不会立即生效，但重启网络服务或主机都会生效；
</code></pre>
<p>路由：</p>
<p>&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;route-ethX</p>
<pre><code>添加格式一：
DEST	via 	NEXTHOP

192.168.20.0/24 via 192.168.20.254
添加格式二：
ADDRESS0=
NETMASK0=
GATEWAY0=
</code></pre>
<p>DNS服务器指定方法只有一种：</p>
<pre><code>/etc/resolv.conf
nameserver DNS_IP_1
nameserver DNS_IP_2
</code></pre>
<p>指定本地解析：</p>
<pre><code>/etc/hosts
主机IP	            主机名      	主机别名
172.16.0.1		www.magedu.com		www

DNS--&gt;/etc/hosts--&gt;DNS
</code></pre>
<p>配置主机名：</p>
<pre><code>hostname HOSTNAME # 立即生效，但不是永久有效；
hostnamectl set-hostname hostname # CentOS 7，同时会修改/etc/hosts

# 配置文件（CentOS 6修改，CentOS7及其以上方式已被弃用）
/etc/sysconfig/network
HOSTNAME=

# 配置文件（CentOS 7修改）
/etc/hosts
</code></pre>
<p>RHEL5：（图形化界面设置）</p>
<pre><code>setup: system-config-network-tui
system-config-network-gui
</code></pre>
<h3 id="IP管理新命令"><a href="#IP管理新命令" class="headerlink" title="IP管理新命令"></a>IP管理新命令</h3><p>iproute2</p>
<pre><code>ip
    link: 网络接口属性
    addr: 协议地址
    route: 路由

link
    show
        ip -s link show
    set
        ip link set DEV &#123;up|down&#125;
        
addr
    add
        ip addr add ADDRESS dev DEV
    del
        ip addr del ADDRESS dev DEV
    show
        ip addr show dev DEV to PREFIX（显示指定范围内的网卡信息）
    flush
        ip addr flush dev DEV to PREFIX（配置网卡地址删除）


route: 
    ip route add to 10.0.1.0/24 dev eth1 via 192.168.100.6
        add, change, show, flush, replace
        
    

显示网卡属性
[root@localhost network-scripts]# ip -s link show
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    RX: bytes  packets  errors  dropped overrun mcast   
    107024     1248     0       0       0       0       
    TX: bytes  packets  errors  dropped carrier collsns 
    107024     1248     0       0       0       0       
2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000
    link/ether 00:0c:29:fe:dd:c9 brd ff:ff:ff:ff:ff:ff
    RX: bytes  packets  errors  dropped overrun mcast   
    0          0        0       0       0       0       
    TX: bytes  packets  errors  dropped carrier collsns 
    23168      144      0       0       0       0   

关闭网卡
[root@localhost network-scripts]# ip link set ens33 down

查看网卡地址
[root@localhost network-scripts]# ip -s addr show dev ens33
2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 00:0c:29:fe:dd:c9 brd ff:ff:ff:ff:ff:ff
    inet 192.168.120.12/24 scope global ens33
       valid_lft forever preferred_lft forever
    RX: bytes  packets  errors  dropped overrun mcast   
    0          0        0       0       0       0       
    TX: bytes  packets  errors  dropped carrier collsns 
    49909      306      0       0       0       0      
 
显示指定IP地址范围内的网卡信息
[root@localhost network-scripts]# ip addr show dev ens33  to 10/8
[root@localhost network-scripts]# ip addr show dev ens33  to 192.168.120.0/24
2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    inet 192.168.120.12/24 scope global ens33
       valid_lft forever preferred_lft forever

删除指定范围内的网卡地址
[root@localhost network-scripts]# ip addr show dev ens33
2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 00:0c:29:fe:dd:c9 brd ff:ff:ff:ff:ff:ff
    inet 192.168.120.12/24 scope global ens33
       valid_lft forever preferred_lft forever
    inet 192.168.121.11/24 scope global ens33:1
       valid_lft forever preferred_lft forever

[root@localhost network-scripts]# ip addr flush dev ens33 to 192.168.121.11/24

[root@localhost network-scripts]# ip addr show dev ens33
2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 00:0c:29:fe:dd:c9 brd ff:ff:ff:ff:ff:ff
    inet 192.168.120.12/24 scope global ens33
       valid_lft forever preferred_lft forever

添加路由
[root@localhost network-scripts]# ip route add to 10.0.1.0/24 dev ens33 via 192.168.120.6
[root@localhost network-scripts]# ip route show
10.0.1.0/24 via 192.168.120.6 dev ens33 
192.168.20.0/24 via 192.168.122.254 dev virbr0 
192.168.120.0/24 dev ens33 proto kernel scope link src 192.168.120.12 
192.168.122.0/24 dev virbr0 proto kernel scope link src 192.168.122.1 
</code></pre>
<h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><p>一块网卡可以使用多个地址：<br>网络设备可以起别名：</p>
<p>eth0</p>
<pre><code>ethX:X, eth0:0, eth0:1, ...
    
</code></pre>
<p>配置方法：</p>
<pre><code>第一种方法：

ifconfig ethX:X IP/NETMASK
ifconfig eth0:0 172.16.200.33/16

第二种方法：
ip 
   eth1, 添加个地址192.168.100.1
    
ip addr add 192.168.100.1/24 dev eth1 label eth1:0

第三种方法,上面的方法主机重启会消失	
/etc/sysconfig/network-scripts/ifcfg-ethX:X
DEVICE=ethX:X

非主要地址不能使用DHCP动态获取; 
</code></pre>
<p>监听端口：  </p>
<p>netstat命令：</p>
<pre><code>-r: 显示路由表
-n: 以数字方式显示
-a：显示所有的网络连接和监听接口
-t: 建立的tcp连接
-u: 显示udp连接
-l: 显示监听状态的连接
-p: 显示监听指定的套接字的进程的进程号及进程名

[root@localhost html]# netstat -anptl
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    
tcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN      1175/cupsd          
tcp        0      0 127.0.0.1:25            0.0.0.0:*               LISTEN      1382/master         
tcp        0      0 127.0.0.1:44321         0.0.0.0:*               LISTEN      19272/pmcd          
tcp        0      0 127.0.0.1:4330          0.0.0.0:*               LISTEN      34102/pmlogger  
</code></pre>
<div class="note green icon-padding flat">
<p>**参考内容**：</p> 
<p>1. 马哥Linux运维课程</p> 
</div>    
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">QiYan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2022/11/27/Linux-network/">http://example.com/2022/11/27/Linux-network/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">知与行</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/network/">network</a></div><div class="post_share"><div class="social-share" data-image="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/11/27/combute-basic/"><img class="prev-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">计算机基础</div></div></a></div><div class="next-post pull-right"><a href="/2022/11/27/Linux-software/"><img class="next-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Linux软件包管理</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">QiYan</div><div class="author-info__description">学而不思则惘 思而不学则殆</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">20</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">21</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content"></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80"><span class="toc-number">1.</span> <span class="toc-text">网络基础</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE"><span class="toc-number">2.</span> <span class="toc-text">Linux网络配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E7%BD%91%E7%BB%9C%E4%BF%A1%E6%81%AF"><span class="toc-number">2.1.</span> <span class="toc-text">查看网络信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E5%90%AF%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%EF%BC%9A"><span class="toc-number">2.2.</span> <span class="toc-text">重启网络服务：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%EF%BC%9A"><span class="toc-number">2.3.</span> <span class="toc-text">路由：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">2.4.</span> <span class="toc-text">配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IP%E7%AE%A1%E7%90%86%E6%96%B0%E5%91%BD%E4%BB%A4"><span class="toc-number">2.5.</span> <span class="toc-text">IP管理新命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E5%AE%83"><span class="toc-number">3.</span> <span class="toc-text">其它</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/12/23/k8s/" title="Devops核心要点和k8s架构概述">Devops核心要点和k8s架构概述</a><time datetime="2022-12-23T08:39:13.331Z" title="发表于 2022-12-23 16:39:13">2022-12-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/12/15/Docker3/" title="docker数据卷和网络">docker数据卷和网络</a><time datetime="2022-12-15T12:16:17.374Z" title="发表于 2022-12-15 20:16:17">2022-12-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/12/15/Docker1/" title="docker镜像和容器管理">docker镜像和容器管理</a><time datetime="2022-12-15T11:58:22.832Z" title="发表于 2022-12-15 19:58:22">2022-12-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/12/15/Docker2/" title="docker镜像制作">docker镜像制作</a><time datetime="2022-12-15T11:56:40.452Z" title="发表于 2022-12-15 19:56:40">2022-12-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/12/12/Docker/" title="docker基础">docker基础</a><time datetime="2022-12-12T14:37:54.050Z" title="发表于 2022-12-12 22:37:54">2022-12-12</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By QiYan</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>